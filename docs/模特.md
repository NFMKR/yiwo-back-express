å¥½çš„ï¼Œæˆ‘æ¥åˆ›å»ºæ¨¡ç‰¹é€‰æ‹©æ¨¡å‹å’Œç›¸å…³æ¥å£ã€‚

[7 tools called]

å®Œæˆï¼æˆ‘å·²ç»å®Œæˆäº†æ¨¡ç‰¹é€‰æ‹©æ¨¡å‹å’Œç›¸å…³æ¥å£ã€‚

## âœ… å·²å®Œæˆçš„å†…å®¹

### ğŸ“ åˆ›å»ºçš„æ–‡ä»¶

1. **`src/models/modelPersonModel.js`** - æ¨¡ç‰¹æ•°æ®æ¨¡å‹
2. **`src/services/modelPersonService.js`** - æ¨¡ç‰¹æœåŠ¡å±‚
3. **`src/controllers/modelPersonController.js`** - æ¨¡ç‰¹æ§åˆ¶å™¨
4. **æ›´æ–° `src/routes/index.js`** - æ·»åŠ æ¨¡ç‰¹è·¯ç”±

### ğŸ“‹ æ•°æ®æ¨¡å‹å­—æ®µ

```javascript
{
  modelId: String,           // æ¨¡ç‰¹IDï¼ˆå¿…å¡«ï¼Œå”¯ä¸€ï¼‰
  modelName: String,         // æ¨¡ç‰¹åå­—ï¼ˆå¿…å¡«ï¼‰
  avatarUrl: String,         // å¤´åƒå›¾ç‰‡URLï¼ˆå¿…å¡«ï¼‰
  fullBodyImageUrl: String,  // å…¨èº«å›¾ç‰‡URLï¼ˆå¿…å¡«ï¼‰
  
  // ç‰¹å¾å‚æ•°
  gender: String,            // æ€§åˆ«ï¼šç”·/å¥³/ä¸­æ€§
  ageStage: String,          // å¹´é¾„é˜¶æ®µï¼šå„¿ç«¥/é’å°‘å¹´/é’å¹´/ä¸­å¹´/è€å¹´
  bodyFeature: String,       // èº«ä½“ç‰¹å¾ï¼šçº¤ç˜¦/æ ‡å‡†/å¥å£®/ä¸°æ»¡/è¿åŠ¨å‹
  personStyle: String,       // äººç‰©é£æ ¼ï¼šä¼‘é—²/å•†åŠ¡/æ—¶å°š/è¿åŠ¨/ç”œç¾/å¸…æ°”/ä¼˜é›…/è¡—å¤´
  heightStage: String,       // èº«é«˜é˜¶æ®µï¼š150cmä»¥ä¸‹/150-160cm/160-170cm/170-180cm/180cmä»¥ä¸Š
  weightStage: String,       // ä½“é‡é˜¶æ®µï¼š40kgä»¥ä¸‹/40-50kg/50-60kg/60-70kg/70-80kg/80kgä»¥ä¸Š
  
  description: String,       // æè¿°ï¼ˆå¯é€‰ï¼‰
  status: String,            // çŠ¶æ€ï¼šå¯ç”¨/ç¦ç”¨
  createdAt: Date,           // åˆ›å»ºæ—¶é—´
  updatedAt: Date            // æ›´æ–°æ—¶é—´
}
```

### ğŸ¨ ç‰¹å¾é€‰é¡¹è¯¦æƒ…

#### æ€§åˆ«é€‰é¡¹
- ç”·
- å¥³
- ä¸­æ€§

#### å¹´é¾„é˜¶æ®µ
- å„¿ç«¥
- é’å°‘å¹´
- é’å¹´
- ä¸­å¹´
- è€å¹´

#### èº«ä½“ç‰¹å¾
- çº¤ç˜¦
- æ ‡å‡†
- å¥å£®
- ä¸°æ»¡
- è¿åŠ¨å‹

#### äººç‰©é£æ ¼
- ä¼‘é—²
- å•†åŠ¡
- æ—¶å°š
- è¿åŠ¨
- ç”œç¾
- å¸…æ°”
- ä¼˜é›…
- è¡—å¤´

#### èº«é«˜é˜¶æ®µ
- 150cmä»¥ä¸‹
- 150-160cm
- 160-170cm
- 170-180cm
- 180cmä»¥ä¸Š

#### ä½“é‡é˜¶æ®µ
- 40kgä»¥ä¸‹
- 40-50kg
- 50-60kg
- 60-70kg
- 70-80kg
- 80kgä»¥ä¸Š

### ğŸ”Œ API æ¥å£

#### 1. æ·»åŠ æ¨¡ç‰¹

**æ¥å£åœ°å€**ï¼š`POST /api/models/add`

**è®¤è¯**ï¼šéœ€è¦è®¤è¯

**è¯·æ±‚ä½“**ï¼š
```json
{
  "modelId": "MODEL001",
  "modelName": "å¼ å°ç¾",
  "avatarUrl": "https://example.com/avatar.jpg",
  "fullBodyImageUrl": "https://example.com/fullbody.jpg",
  "gender": "å¥³",
  "ageStage": "é’å¹´",
  "bodyFeature": "æ ‡å‡†",
  "personStyle": "æ—¶å°š",
  "heightStage": "160-170cm",
  "weightStage": "50-60kg",
  "description": "æ—¶å°šæ°”è´¨æ¨¡ç‰¹ï¼Œé€‚åˆå„ç±»æœè£…å±•ç¤º",
  "status": "å¯ç”¨"
}
```

**å­—æ®µè¯´æ˜**ï¼š
- `modelId` (å¿…å¡«): æ¨¡ç‰¹IDï¼Œå”¯ä¸€æ ‡è¯†
- `modelName` (å¿…å¡«): æ¨¡ç‰¹åå­—
- `avatarUrl` (å¿…å¡«): å¤´åƒå›¾ç‰‡URL
- `fullBodyImageUrl` (å¿…å¡«): å…¨èº«å›¾ç‰‡URL
- `gender` (å¿…å¡«): æ€§åˆ«
- `ageStage` (å¿…å¡«): å¹´é¾„é˜¶æ®µ
- `bodyFeature` (å¿…å¡«): èº«ä½“ç‰¹å¾
- `personStyle` (å¿…å¡«): äººç‰©é£æ ¼
- `heightStage` (å¿…å¡«): èº«é«˜é˜¶æ®µ
- `weightStage` (å¿…å¡«): ä½“é‡é˜¶æ®µ
- `description` (å¯é€‰): æè¿°ä¿¡æ¯
- `status` (å¯é€‰): çŠ¶æ€ï¼Œé»˜è®¤"å¯ç”¨"

**æˆåŠŸå“åº”**ï¼š
```json
{
  "success": true,
  "message": "æ¨¡ç‰¹æ·»åŠ æˆåŠŸ",
  "data": {
    "model": {
      "id": "507f1f77bcf86cd799439011",
      "modelId": "MODEL001",
      "modelName": "å¼ å°ç¾",
      "avatarUrl": "https://example.com/avatar.jpg",
      "fullBodyImageUrl": "https://example.com/fullbody.jpg",
      "gender": "å¥³",
      "ageStage": "é’å¹´",
      "bodyFeature": "æ ‡å‡†",
      "personStyle": "æ—¶å°š",
      "heightStage": "160-170cm",
      "weightStage": "50-60kg",
      "description": "æ—¶å°šæ°”è´¨æ¨¡ç‰¹ï¼Œé€‚åˆå„ç±»æœè£…å±•ç¤º",
      "status": "å¯ç”¨",
      "createdAt": "2025-01-07T10:00:00.000Z"
    }
  }
}
```

---

#### 2. è·å–æ¨¡ç‰¹åˆ—è¡¨ï¼ˆæ”¯æŒåˆ†ç±»ç­›é€‰ï¼‰

**æ¥å£åœ°å€**ï¼š`GET /api/models`

**è®¤è¯**ï¼šéœ€è¦è®¤è¯

**æŸ¥è¯¢å‚æ•°**ï¼ˆå…¨éƒ¨å¯é€‰ï¼‰ï¼š
- `gender`: æ€§åˆ«ç­›é€‰
- `ageStage`: å¹´é¾„é˜¶æ®µç­›é€‰
- `bodyFeature`: èº«ä½“ç‰¹å¾ç­›é€‰
- `personStyle`: äººç‰©é£æ ¼ç­›é€‰
- `heightStage`: èº«é«˜é˜¶æ®µç­›é€‰
- `weightStage`: ä½“é‡é˜¶æ®µç­›é€‰
- `status`: çŠ¶æ€ç­›é€‰ï¼ˆé»˜è®¤ï¼šå¯ç”¨ï¼‰
- `page`: é¡µç ï¼ˆé»˜è®¤ï¼š1ï¼‰
- `limit`: æ¯é¡µæ•°é‡ï¼ˆé»˜è®¤ï¼š20ï¼‰

**è¯·æ±‚ç¤ºä¾‹**ï¼š

```bash
# è·å–æ‰€æœ‰æ¨¡ç‰¹
GET /api/models

# è·å–å¥³æ€§é’å¹´æ¨¡ç‰¹
GET /api/models?gender=å¥³&ageStage=é’å¹´

# è·å–æ—¶å°šé£æ ¼çš„æ ‡å‡†èº«ææ¨¡ç‰¹
GET /api/models?personStyle=æ—¶å°š&bodyFeature=æ ‡å‡†

# è·å–èº«é«˜170-180cmï¼Œä½“é‡60-70kgçš„æ¨¡ç‰¹
GET /api/models?heightStage=170-180cm&weightStage=60-70kg

# å¤šæ¡ä»¶ç»„åˆç­›é€‰ + åˆ†é¡µ
GET /api/models?gender=å¥³&ageStage=é’å¹´&bodyFeature=æ ‡å‡†&personStyle=æ—¶å°š&page=1&limit=10
```

**æˆåŠŸå“åº”**ï¼š
```json
{
  "success": true,
  "message": "è·å–æ¨¡ç‰¹åˆ—è¡¨æˆåŠŸ",
  "data": {
    "models": [
      {
        "_id": "507f1f77bcf86cd799439011",
        "modelId": "MODEL001",
        "modelName": "å¼ å°ç¾",
        "avatarUrl": "https://example.com/avatar.jpg",
        "fullBodyImageUrl": "https://example.com/fullbody.jpg",
        "gender": "å¥³",
        "ageStage": "é’å¹´",
        "bodyFeature": "æ ‡å‡†",
        "personStyle": "æ—¶å°š",
        "heightStage": "160-170cm",
        "weightStage": "50-60kg",
        "description": "æ—¶å°šæ°”è´¨æ¨¡ç‰¹",
        "status": "å¯ç”¨",
        "createdAt": "2025-01-07T10:00:00.000Z",
        "updatedAt": "2025-01-07T10:00:00.000Z"
      }
    ],
    "filters": {
      "gender": "å¥³",
      "ageStage": "é’å¹´",
      "bodyFeature": "å…¨éƒ¨",
      "personStyle": "å…¨éƒ¨",
      "heightStage": "å…¨éƒ¨",
      "weightStage": "å…¨éƒ¨",
      "status": "å¯ç”¨"
    },
    "pagination": {
      "total": 15,
      "page": 1,
      "limit": 20,
      "totalPages": 1
    }
  }
}
```

---

#### 3. è·å–ç­›é€‰é€‰é¡¹

**æ¥å£åœ°å€**ï¼š`GET /api/models/filter-options`

**è®¤è¯**ï¼šéœ€è¦è®¤è¯

**è¯´æ˜**ï¼šè¿”å›æ‰€æœ‰å¯ç”¨çš„ç­›é€‰é€‰é¡¹ï¼Œæ–¹ä¾¿å‰ç«¯æ„å»ºç­›é€‰å™¨

**æˆåŠŸå“åº”**ï¼š
```json
{
  "success": true,
  "message": "è·å–ç­›é€‰é€‰é¡¹æˆåŠŸ",
  "data": {
    "gender": ["ç”·", "å¥³", "ä¸­æ€§"],
    "ageStage": ["å„¿ç«¥", "é’å°‘å¹´", "é’å¹´", "ä¸­å¹´", "è€å¹´"],
    "bodyFeature": ["çº¤ç˜¦", "æ ‡å‡†", "å¥å£®", "ä¸°æ»¡", "è¿åŠ¨å‹"],
    "personStyle": ["ä¼‘é—²", "å•†åŠ¡", "æ—¶å°š", "è¿åŠ¨", "ç”œç¾", "å¸…æ°”", "ä¼˜é›…", "è¡—å¤´"],
    "heightStage": ["150cmä»¥ä¸‹", "150-160cm", "160-170cm", "170-180cm", "180cmä»¥ä¸Š"],
    "weightStage": ["40kgä»¥ä¸‹", "40-50kg", "50-60kg", "60-70kg", "70-80kg", "80kgä»¥ä¸Š"],
    "status": ["å¯ç”¨", "ç¦ç”¨"]
  }
}
```

### ğŸ§ª æµ‹è¯•å‘½ä»¤

```bash
# 1. æ·»åŠ æ¨¡ç‰¹
curl -X POST http://localhost:5002/api/models/add \
  -H "Authorization: Bearer YOUR_TOKEN_HERE" \
  -H "Content-Type: application/json" \
  -d '{
    "modelId": "MODEL001",
    "modelName": "å¼ å°ç¾",
    "avatarUrl": "https://example.com/avatar.jpg",
    "fullBodyImageUrl": "https://example.com/fullbody.jpg",
    "gender": "å¥³",
    "ageStage": "é’å¹´",
    "bodyFeature": "æ ‡å‡†",
    "personStyle": "æ—¶å°š",
    "heightStage": "160-170cm",
    "weightStage": "50-60kg",
    "description": "æ—¶å°šæ°”è´¨æ¨¡ç‰¹"
  }'

# 2. è·å–æ‰€æœ‰æ¨¡ç‰¹
curl -X GET http://localhost:5002/api/models \
  -H "Authorization: Bearer YOUR_TOKEN_HERE"

# 3. è·å–å¥³æ€§é’å¹´æ¨¡ç‰¹
curl -X GET "http://localhost:5002/api/models?gender=å¥³&ageStage=é’å¹´" \
  -H "Authorization: Bearer YOUR_TOKEN_HERE"

# 4. å¤šæ¡ä»¶ç­›é€‰
curl -X GET "http://localhost:5002/api/models?gender=å¥³&ageStage=é’å¹´&bodyFeature=æ ‡å‡†&personStyle=æ—¶å°š" \
  -H "Authorization: Bearer YOUR_TOKEN_HERE"

# 5. è·å–ç­›é€‰é€‰é¡¹
curl -X GET http://localhost:5002/api/models/filter-options \
  -H "Authorization: Bearer YOUR_TOKEN_HERE"
```

### ğŸ” åŠŸèƒ½ç‰¹æ€§

1. âœ… **å¤šç»´åº¦ç­›é€‰**ï¼šæ”¯æŒæ€§åˆ«ã€å¹´é¾„ã€èº«æã€é£æ ¼ã€èº«é«˜ã€ä½“é‡ç­‰å¤šä¸ªç»´åº¦ç­›é€‰
2. âœ… **å…¨éƒ¨è·å–**ï¼šä¸ä¼ ç­›é€‰å‚æ•°æ—¶è·å–æ‰€æœ‰å¯ç”¨çš„æ¨¡ç‰¹
3. âœ… **çµæ´»ç»„åˆ**ï¼šæ”¯æŒå•ä¸ªæˆ–å¤šä¸ªæ¡ä»¶ç»„åˆç­›é€‰
4. âœ… **åˆ†é¡µæ”¯æŒ**ï¼šæ”¯æŒåˆ†é¡µæŸ¥è¯¢ï¼Œæé«˜æ€§èƒ½
5. âœ… **ç´¢å¼•ä¼˜åŒ–**ï¼šä¸ºå¸¸ç”¨æŸ¥è¯¢å­—æ®µåˆ›å»ºç´¢å¼•ï¼Œæé«˜æŸ¥è¯¢é€Ÿåº¦
6. âœ… **ç­›é€‰é€‰é¡¹æ¥å£**ï¼šæä¾›ä¸“é—¨æ¥å£è·å–æ‰€æœ‰å¯ç”¨é€‰é¡¹
7. âœ… **çŠ¶æ€ç®¡ç†**ï¼šæ”¯æŒå¯ç”¨/ç¦ç”¨çŠ¶æ€ï¼Œé»˜è®¤åªæ˜¾ç¤ºå¯ç”¨çš„æ¨¡ç‰¹
8. âœ… **é˜²é‡å¤**ï¼šæ¨¡ç‰¹IDå”¯ä¸€ï¼Œä¸èƒ½é‡å¤æ·»åŠ 

### ğŸ“Š ä½¿ç”¨åœºæ™¯ç¤ºä¾‹

```javascript
// åœºæ™¯1ï¼šç”¨æˆ·é€‰æ‹©å¥³æ€§é’å¹´æ¨¡ç‰¹
GET /api/models?gender=å¥³&ageStage=é’å¹´

// åœºæ™¯2ï¼šç”¨æˆ·éœ€è¦170-180cmèº«é«˜çš„è¿åŠ¨å‹æ¨¡ç‰¹
GET /api/models?heightStage=170-180cm&bodyFeature=è¿åŠ¨å‹

// åœºæ™¯3ï¼šå•†åŠ¡é£æ ¼çš„ä¸­å¹´ç”·æ€§æ¨¡ç‰¹
GET /api/models?gender=ç”·&ageStage=ä¸­å¹´&personStyle=å•†åŠ¡

// åœºæ™¯4ï¼šæ—¶å°šé£æ ¼ã€æ ‡å‡†èº«æã€160-170cmçš„å¥³æ€§æ¨¡ç‰¹
GET /api/models?gender=å¥³&bodyFeature=æ ‡å‡†&personStyle=æ—¶å°š&heightStage=160-170cm

// åœºæ™¯5ï¼šå‰ç«¯åˆå§‹åŒ–ï¼Œè·å–æ‰€æœ‰ç­›é€‰é€‰é¡¹
GET /api/models/filter-options
```

### ğŸ¯ ä¸AIè¯•ç©¿çš„æ•´åˆ

æ¨¡ç‰¹çš„ `fullBodyImageUrl` å¯ä»¥ç›´æ¥ç”¨äºAIè¯•ç©¿æ¥å£çš„ `person_image_url` å‚æ•°ï¼š

```javascript
// 1. ç”¨æˆ·é€‰æ‹©æ¨¡ç‰¹
GET /api/models?gender=å¥³&ageStage=é’å¹´
// è¿”å›æ¨¡ç‰¹ä¿¡æ¯ï¼ŒåŒ…å« fullBodyImageUrl

// 2. ä½¿ç”¨æ¨¡ç‰¹å›¾ç‰‡è¿›è¡ŒAIè¯•ç©¿
POST /api/wear/try-on
{
  "person_image_url": "æ¨¡ç‰¹çš„fullBodyImageUrl",
  "top_garment_url": "è¡£æœå›¾ç‰‡URL",
  "bottom_garment_url": "è£¤å­å›¾ç‰‡URL"
}
```

### ğŸ“ æ•°æ®ç»“æ„è®¾è®¡äº®ç‚¹

1. **å¤åˆç´¢å¼•**ï¼šä¸º `gender + ageStage + bodyFeature` å’Œ `personStyle + status` åˆ›å»ºäº†å¤åˆç´¢å¼•ï¼Œä¼˜åŒ–å¤šæ¡ä»¶æŸ¥è¯¢
2. **æšä¸¾éªŒè¯**ï¼šæ‰€æœ‰ç‰¹å¾å­—æ®µéƒ½ä½¿ç”¨æšä¸¾ç±»å‹ï¼Œç¡®ä¿æ•°æ®ä¸€è‡´æ€§
3. **çŠ¶æ€å­—æ®µ**ï¼šæ”¯æŒå¯ç”¨/ç¦ç”¨ï¼Œæ–¹ä¾¿ç®¡ç†æ¨¡ç‰¹æ˜¾ç¤º
4. **å®Œæ•´ä¿¡æ¯**ï¼šåŒ…å«å¤´åƒå’Œå…¨èº«ç…§ä¸¤ç§å›¾ç‰‡ï¼Œé€‚åº”ä¸åŒå±•ç¤ºéœ€æ±‚

### ğŸ”’ æ³¨æ„äº‹é¡¹

1. **è®¤è¯è¦æ±‚**ï¼šæ‰€æœ‰æ¥å£éƒ½éœ€è¦ç”¨æˆ·ç™»å½•è®¤è¯
2. **æ¨¡ç‰¹IDå”¯ä¸€**ï¼šæ¯ä¸ªæ¨¡ç‰¹å¿…é¡»æœ‰å”¯ä¸€çš„ID
3. **å›¾ç‰‡URL**ï¼šéœ€è¦æä¾›æœ‰æ•ˆçš„HTTP/HTTPSå›¾ç‰‡é“¾æ¥
4. **é»˜è®¤çŠ¶æ€**ï¼šæ–°æ·»åŠ çš„æ¨¡ç‰¹é»˜è®¤ä¸º"å¯ç”¨"çŠ¶æ€
5. **ç­›é€‰é€»è¾‘**ï¼šä¸ä¼ ç­›é€‰å‚æ•°æ—¶é»˜è®¤æ˜¾ç¤ºæ‰€æœ‰å¯ç”¨çš„æ¨¡ç‰¹
6. **åˆ†é¡µæ€§èƒ½**ï¼šå»ºè®®è®¾ç½®åˆç†çš„ limit å€¼ï¼Œé¿å…ä¸€æ¬¡è¿”å›è¿‡å¤šæ•°æ®

### ğŸ“Š API æ¥å£æ€»è§ˆ

| æ¥å£ | æ–¹æ³• | è·¯å¾„ | åŠŸèƒ½ |
|------|------|------|------|
| æ·»åŠ æ¨¡ç‰¹ | POST | /api/models/add | æ·»åŠ æ–°æ¨¡ç‰¹ |
| è·å–æ¨¡ç‰¹åˆ—è¡¨ | GET | /api/models | è·å–æ¨¡ç‰¹åˆ—è¡¨ï¼ˆæ”¯æŒå¤šç»´åº¦ç­›é€‰ï¼‰|
| è·å–ç­›é€‰é€‰é¡¹ | GET | /api/models/filter-options | è·å–æ‰€æœ‰å¯ç”¨çš„ç­›é€‰é€‰é¡¹ |

æ¨¡ç‰¹é€‰æ‹©åŠŸèƒ½å·²å…¨éƒ¨å®Œæˆï¼ğŸ‰ ç°åœ¨ç”¨æˆ·å¯ä»¥æ ¹æ®æ€§åˆ«ã€å¹´é¾„ã€èº«æã€é£æ ¼ç­‰å¤šä¸ªç»´åº¦ç­›é€‰åˆé€‚çš„æ¨¡ç‰¹è¿›è¡ŒAIè¯•ç©¿äº†ã€‚